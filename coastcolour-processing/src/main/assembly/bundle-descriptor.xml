<bundleDescriptor>
    <bundleName>coastcolour-processing</bundleName>
    <bundleVersion>1.7-SNAPSHOT</bundleVersion>
    <processorDescriptors>

        <processorDescriptor>
            <executableName>CoastColour.L1P</executableName>
            <processorName>MERIS CoastColour L1P</processorName>
            <processorVersion>1.7-SNAPSHOT</processorVersion>
            <parameterDescriptors>
                <!-- CoastColour L1P parameters -->
                <parameterDescriptor>
                    <name>doIcol</name>
                    <type>boolean</type>
                    <description>Whether to perform ICOL correction (can be time- and memory-consuming for large
                        products!)
                    </description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>doCalibration</name>
                    <type>boolean</type>
                    <description>Applies correction from MERIS 2nd to 3rd reprocessing quality</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>doSmile</name>
                    <type>boolean</type>
                    <description>Whether to perform MERIS Smile-effect correction</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>doEqualization</name>
                    <type>boolean</type>
                    <description>Perform removal of detector-to-detector systematic radiometric differences in MERIS L1b
                        data products
                    </description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <!-- IdePix parameters -->
                <parameterDescriptor>
                    <name>ccCloudBufferWidth</name>
                    <type>string</type>
                    <description>The width of a cloud 'safety buffer' around a pixel which was classified as cloudy,
                        [0,100]
                    </description>
                    <defaultValue>2</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>ccOutputCloudProbabilityFeatureValue</name>
                    <type>boolean</type>
                    <description>Write Cloud Probability Feature Value to the CC L1P target product</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>ccCloudScreeningAmbiguous</name>
                    <type>string</type>
                    <description>Threshold of Cloud Probability Feature Value above which cloud is regarded as still
                        ambiguous
                    </description>
                    <defaultValue>1.4</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>ccCloudScreeningSure</name>
                    <type>string</type>
                    <description>Threshold of Cloud Probability Feature Value above which cloud is regarded as sure
                    </description>
                    <defaultValue>1.8</defaultValue>
                </parameterDescriptor>
            </parameterDescriptors>
            <jobConfig>
                <jobParameter>
                    <name>calvalus.output.regex</name>
                    <value>.+(MER_..._)1.....(.+)</value>
                </jobParameter>
                <jobParameter>
                    <name>calvalus.output.replacement</name>
                    <value>$1CCL1P_$2</value>
                </jobParameter>
            </jobConfig>
            <outputFormats>NetCDF,GeoTIFF,BEAM-DIMAP</outputFormats>
            <descriptionHtml>
                <![CDATA[<p>
                            This processor performs radiometric correction and pixel classification. It has been
                            developed in the frame of the CoastColour project.</p>
                            ]]>
            </descriptionHtml>
            <inputProductTypes>MERIS_L1B</inputProductTypes>
            <outputProductType>MERIS_CC_L1P</outputProductType>
            <validMaskExpression>!l1p_flags.INVALID</validMaskExpression>

            <outputVariables>
                <outputVariable>
                    <name>radiance_1</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_2</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_3</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_4</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_5</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_6</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_7</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_8</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_9</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_10</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_11</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_12</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_13</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_14</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_15</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>detector_index</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>l1_flags</name>
                </outputVariable>
                <outputVariable>
                    <name>l1p_flags</name>
                </outputVariable>
            </outputVariables>
        </processorDescriptor>

        <processorDescriptor>
            <executableName>CoastColour.L1P.Icol</executableName>
            <processorName>MERIS CoastColour L1P ICOL</processorName>
            <processorVersion>1.7-SNAPSHOT</processorVersion>
            <defaultParameters><![CDATA[]]></defaultParameters>
            <jobConfig>
                <jobParameter>
                    <name>calvalus.output.regex</name>
                    <value>.+(MER_..._)1.....(.+)</value>
                </jobParameter>
                <jobParameter>
                    <name>calvalus.output.replacement</name>
                    <value>$1CCL1P_$2</value>
                </jobParameter>
            </jobConfig>
            <outputFormats>NetCDF,GeoTIFF,BEAM-DIMAP</outputFormats>
            <descriptionHtml>
                <![CDATA[<p>
                            This processor performs ICOL correction on L1P products.</p>
                            ]]>
            </descriptionHtml>
            <inputProductTypes>MERIS_CC_L1P</inputProductTypes>
            <outputProductType>MERIS_CC_L1P</outputProductType>
            <validMaskExpression>!l1_flags.INVALID</validMaskExpression>

            <jobConfig>
                <jobParameter>
                    <name>calvalus.input.minWidth</name>
                    <value>50</value>
                </jobParameter>
                <jobParameter>
                    <name>calvalus.input.minHeight</name>
                    <value>50</value>
                </jobParameter>
            </jobConfig>

            <outputVariables>
                <outputVariable>
                    <name>radiance_1</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_2</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_3</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_4</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_5</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_6</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_7</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_8</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_9</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_10</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_11</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_12</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_13</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_14</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>radiance_15</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>detector_index</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>l1_flags</name>
                </outputVariable>
                <outputVariable>
                    <name>l1p_flags</name>
                </outputVariable>
            </outputVariables>
        </processorDescriptor>

        <processorDescriptor>
            <executableName>CoastColour.L2R</executableName>
            <processorName>MERIS CoastColour L2R</processorName>
            <processorVersion>1.7-SNAPSHOT</processorVersion>
            <parameterDescriptors>
                <!-- CoastColour L1P parameters -->
                <parameterDescriptor>
                    <name>doCalibration</name>
                    <type>boolean</type>
                    <description>Applies correction from MERIS 2nd to 3rd reprocessing quality</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>doSmile</name>
                    <type>boolean</type>
                    <description>Whether to perform MERIS Smile-effect correction</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>doEqualization</name>
                    <type>boolean</type>
                    <description>Perform removal of detector-to-detector systematic radiometric differences in MERIS L1b data products</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <!-- IdePix parameters -->
                <parameterDescriptor>
                    <name>ccCloudBufferWidth</name>
                    <type>string</type>
                    <description>The width of a cloud 'safety buffer' around a pixel which was classified as cloudy, [0,100]</description>
                    <defaultValue>2</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>ccOutputCloudProbabilityFeatureValue</name>
                    <type>boolean</type>
                    <description>Write Cloud Probability Feature Value to the CC L1P target product</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>ccCloudScreeningAmbiguous</name>
                    <type>string</type>
                    <description>Threshold of Cloud Probability Feature Value above which cloud is regarded as still ambiguous</description>
                    <defaultValue>1.4</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>ccCloudScreeningSure</name>
                    <type>string</type>
                    <description>Threshold of Cloud Probability Feature Value above which cloud is regarded as sure</description>
                    <defaultValue>1.8</defaultValue>
                </parameterDescriptor>
                <!-- L2R parameters -->
                <parameterDescriptor>
                    <name>useSnTMap</name>
                    <type>boolean</type>
                    <description>By default a climatology map is used. If set to 'false' the specified average values are used for the whole scene</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>averageSalinity</name>
                    <type>string</type>
                    <description>If no climatology is used, the average salinity [PSU] of the water in the region to be processed is taken</description>
                    <defaultValue>35</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>averageTemperature</name>
                    <type>string</type>
                    <description>If no climatology is used, the average temperature [C] of the water in the region to be processed is taken</description>
                    <defaultValue>15</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>useExtremeCaseMode</name>
                    <type>boolean</type>
                    <description>Use special set of NNs to finally derive water IOPs in extreme ranges</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>landExpression</name>
                    <type>string</type>
                    <description>The arithmetic expression used for land detection</description>
                    <defaultValue>l1p_flags.CC_LAND</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>cloudIceExpression</name>
                    <type>string</type>
                    <description>The arithmetic expression used for cloud/ice detection</description>
                    <defaultValue>(l1p_flags.CC_CLOUD &amp;&amp; not l1p_flags.CC_CLOUD_AMBIGUOUS) || l1p_flags.CC_SNOW_ICE</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>outputToa</name>
                    <type>boolean</type>
                    <description>Writes the Top of Atmosphere reflectances to the CC L2R target product</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>outputReflecAs</name>
                    <type>stringArray</type>
                    <description>Select if water leaving reflectances shall be written as radiances or irradiances. The irradiances ( = radiances multiplied by PI) are compatible with the standard MERIS product.</description>
                    <defaultValue>RADIANCE_REFLECTANCES</defaultValue>
                    <valueSet>RADIANCE_REFLECTANCES,IRRADIANCE_REFLECTANCES</valueSet>
                </parameterDescriptor>
            </parameterDescriptors>
            <jobConfig>
                <jobParameter>
                    <name>calvalus.output.regex</name>
                    <value>.+(MER_..._)1.....(.+)</value>
                </jobParameter>
                <jobParameter>
                    <name>calvalus.output.replacement</name>
                    <value>$1CCL1P_$2</value>
                </jobParameter>
            </jobConfig>
            <outputFormats>NetCDF,GeoTIFF,BEAM-DIMAP</outputFormats>
            <descriptionHtml>
                <![CDATA[<p>
                    This processor performs an atmospheric correction.
                    It has been developed in the frame of the CoastColour project.
                    <b>Output bands:</b>
                    <ul>
                    <li>reflec_&lt;#&gt; - Water leaving radiance reflectance, where &lt;#&gt is one of 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12 and 13.</li>
                    <li>norm_refl_&lt;#&gt; - Normalised water leaving radiance reflectance, where &lt;#&gt is one of 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12 and 13.</li>
                    <li>atm_tau_&lt;λ&gt; - Spectral aerosol optical depth at &lt;λ&gt;, where &lt;λ&gt; is one of 550, 778 and 865.</li>
                    <li>ang_443_865 - Aerosol Angstrom coefficient at spectral wavelength 865.</li>
                    <li>detector_index - MERIS L1B detector index.</li>
                    <li>altitude - DEM altitude.</li>
                    <li>l1_flags - Level 1b classification and quality flags.</li>
                    <li>l1p_flags - CoastColour L1P pixel classification.</li>
                    <li>l2r_flags - CoastColour L2R atmospheric correction quality flags.</li>
                    </ul>
                </p>]]></descriptionHtml>
            <inputProductTypes>MERIS_L1B,MERIS_CC_L1P</inputProductTypes>
            <outputProductType>MERIS_CC_L2R</outputProductType>
            <validMaskExpression>!l2r_flags.INPUT_INVALID</validMaskExpression>

            <outputVariables>
                <outputVariable>
                    <name>reflec_1</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_2</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_3</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_4</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_5</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_6</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_7</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_8</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_9</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_10</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_12</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>reflec_13</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_1</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_2</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_3</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_4</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_5</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_6</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_7</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_8</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_9</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_10</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_12</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>norm_refl_13</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>atm_tau_550</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>atm_tau_778</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>atm_tau_865</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>ang_443_865</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>altitude</name>
                </outputVariable>
                <outputVariable>
                    <name>detector_index</name>
                </outputVariable>
                <outputVariable>
                    <name>l1_flags</name>
                </outputVariable>
                <outputVariable>
                    <name>l1p_flags</name>
                </outputVariable>
                <outputVariable>
                    <name>l2r_flags</name>
                </outputVariable>
            </outputVariables>
        </processorDescriptor>

        <processorDescriptor>
            <executableName>CoastColour.L2W</executableName>
            <processorName>MERIS CoastColour L2W</processorName>
            <processorVersion>1.7-SNAPSHOT</processorVersion>
            <parameterDescriptors>
                <!-- CoastColour L1P parameters -->
                <parameterDescriptor>
                    <name>doCalibration</name>
                    <type>boolean</type>
                    <description>Applies correction from MERIS 2nd to 3rd reprocessing quality</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>doSmile</name>
                    <type>boolean</type>
                    <description>Whether to perform MERIS Smile-effect correction</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>doEqualization</name>
                    <type>boolean</type>
                    <description>Perform removal of detector-to-detector systematic radiometric differences in MERIS L1b data products</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <!-- IdePix parameters -->
                <parameterDescriptor>
                    <name>ccCloudBufferWidth</name>
                    <type>string</type>
                    <description>The width of a cloud 'safety buffer' around a pixel which was classified as cloudy, [0,100]</description>
                    <defaultValue>2</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>ccOutputCloudProbabilityFeatureValue</name>
                    <type>boolean</type>
                    <description>Write Cloud Probability Feature Value to the CC L1P target product</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>ccCloudScreeningAmbiguous</name>
                    <type>string</type>
                    <description>Threshold of Cloud Probability Feature Value above which cloud is regarded as still ambiguous</description>
                    <defaultValue>1.4</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>ccCloudScreeningSure</name>
                    <type>string</type>
                    <description>Threshold of Cloud Probability Feature Value above which cloud is regarded as sure</description>
                    <defaultValue>1.8</defaultValue>
                </parameterDescriptor>
                <!-- L2R parameters -->
                <parameterDescriptor>
                    <name>useSnTMap</name>
                    <type>boolean</type>
                    <description>By default a climatology map is used. If set to 'false' the specified average values are used for the whole scene</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>averageSalinity</name>
                    <type>string</type>
                    <description>If no climatology is used, the average salinity [PSU] of the water in the region to be processed is taken</description>
                    <defaultValue>35</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>averageTemperature</name>
                    <type>string</type>
                    <description>If no climatology is used, the average temperature [C] of the water in the region to be processed is taken</description>
                    <defaultValue>15</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>useExtremeCaseMode</name>
                    <type>boolean</type>
                    <description>Use special set of NNs to finally derive water IOPs in extreme ranges</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>landExpression</name>
                    <type>string</type>
                    <description>The arithmetic expression used for land detection</description>
                    <defaultValue>l1p_flags.CC_LAND</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>cloudIceExpression</name>
                    <type>string</type>
                    <description>The arithmetic expression used for cloud/ice detection</description>
                    <defaultValue>(l1p_flags.CC_CLOUD &amp;&amp; not l1p_flags.CC_CLOUD_AMBIGUOUS) || l1p_flags.CC_SNOW_ICE</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>outputToa</name>
                    <type>boolean</type>
                    <description>Writes the Top of Atmosphere reflectances to the CC L2R target product</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>outputReflecAs</name>
                    <type>stringArray</type>
                    <description>Select if water leaving reflectances shall be written as radiances or irradiances. The irradiances ( = radiances multiplied by PI) are compatible with the standard MERIS product.</description>
                    <defaultValue>RADIANCE_REFLECTANCES</defaultValue>
                    <valueSet>RADIANCE_REFLECTANCES,IRRADIANCE_REFLECTANCES</valueSet>
                </parameterDescriptor>
                <!-- L2W parameters -->
                <parameterDescriptor>
                    <name>invalidPixelExpression</name>
                    <type>string</type>
                    <description>Expression defining pixels not considered for L2W processing</description>
                    <defaultValue>l2r_flags.INPUT_INVALID</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>qaaDivideByPI</name>
                    <type>boolean</type>
                    <description>Select if the source remote reflectances shall be divided by PI. It is consistent to do this if the source reflectances were written as IRRADIANCE_REFLECTANCES !</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>outputReflec</name>
                    <type>boolean</type>
                    <description>Write the water leaving reflectance to the final CC L2W product</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>outputAPoc</name>
                    <type>boolean</type>
                    <description>Write absorption by particulate organic matter (A_Poc) to the CC L2W target product</description>
                    <defaultValue>false</defaultValue>
                </parameterDescriptor>
                <parameterDescriptor>
                    <name>outputKdSpectrum</name>
                    <type>boolean</type>
                    <description>Write the output of downwelling irradiance attenuation coefficients (Kd) to the CC L2W target product. If disabled only Kd_490 is added to the output.</description>
                    <defaultValue>true</defaultValue>
                </parameterDescriptor>
            </parameterDescriptors>
            <jobConfig>
                <jobParameter>
                    <name>calvalus.output.regex</name>
                    <value>.+(MER_..._)1.....(.+)</value>
                </jobParameter>
                <jobParameter>
                    <name>calvalus.output.replacement</name>
                    <value>$1CCL1P_$2</value>
                </jobParameter>
            </jobConfig>
            <outputFormats>NetCDF,GeoTIFF,BEAM-DIMAP</outputFormats>
            <descriptionHtml>
                <![CDATA[<p>
                This processor computes water constituents and IOPs optimized for coastal zones.
                It has been developed in the frame of the CoastColour project.
                <b>Output bands:</b>
                <ul>
                <li>iop_a_total_443 - Total absorption coefficient of all water constituents at 443 nm.</li>
                <li>iop_a_ys_443 - Yellow substance absorption coefficient at 443 nm.</li>
                <li>iop_a_pig_443 - Pigment absorption coefficient at 443 nm.</li>
                <li>iop_bb_spm_443 - Backscattering of suspended particulate matter at 443 nm.</li>
                <li>iop_quality - Quality indicator for IOPs.</li>
                <li>conc_tsm - Total suspended matter dry weight concentration.</li>
                <li>conc_chl - Chlorophyll concentration.</li>
                <li>K_min - Minimum downwelling irradiance attenuation coefficient.</li>
                <li>Kd_&lt;λ&gt; - Downwelling irradiance attenuation coefficient at &lt;λ&gt;, where &lt;λ&gt; is one of 412, 443, 490, 510, 560, 620, 664 and 680</li>
                <li>Z90_max - Maximum signal depth.</li>
                <li>turbidity - Turbidity in FNU (Formazine Nephelometric Unit).</li>
                <li>altitude - DEM altitude.</li>
                <li>l1_flags - Level 1b classification and quality flags.</li>
                <li>l1p_flags - CoastColour L1P pixel classification.</li>
                <li>l2r_flags - CoastColour L2R atmospheric correction quality flags.</li>
                <li>l2w_flags - CoastColour L2W water constituents and IOPs retrieval quality flags.</li>
                </ul>
                Do not apply this processor to MERIS L1B unless the input region is small. Use the L1P processor first, then apply L2R to the output set, then apply L2W.
                </p>]]></descriptionHtml>
            <inputProductTypes>MERIS_L1B,MERIS_CC_L1P,MERIS_CC_L2R</inputProductTypes>
            <outputProductType>MERIS_CC_L2W</outputProductType>
            <validMaskExpression>!l2w_flags.INVALID</validMaskExpression>
            <outputVariables>
                <outputVariable>
                    <name>iop_a_total_443</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>iop_a_ys_443</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>iop_a_pig_443</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>iop_bb_spm_443</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>iop_quality</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>conc_tsm</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>conc_chl_nn</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>conc_chl_oc4</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>conc_chl_merged</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>conc_chl_weight</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>K_min</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>Kd_412</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>Kd_443</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>Kd_490</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>Kd_510</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>Kd_560</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>Kd_620</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>Kd_664</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>Kd_680</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>Z90_max</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>turbidity_index</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>altitude</name>
                    <defaultAggregator>AVG</defaultAggregator>
                    <defaultWeightCoeff>1.0</defaultWeightCoeff>
                </outputVariable>
                <outputVariable>
                    <name>l1_flags</name>
                </outputVariable>
                <outputVariable>
                    <name>l1p_flags</name>
                </outputVariable>
                <outputVariable>
                    <name>l2r_flags</name>
                </outputVariable>
                <outputVariable>
                    <name>l2w_flags</name>
                </outputVariable>
            </outputVariables>
        </processorDescriptor>

    </processorDescriptors>
</bundleDescriptor>